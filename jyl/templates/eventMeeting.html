{% extends 'base.html' %}

{% block title %}{% if eventMeetingData['meeting'] %}Meeting: {{ eventMeeting.start.strftime('%B %-d, %Y') }}{% else %}{{ eventMeeting.name }}: {{ eventMeeting.start.strftime('%B %-d, %Y') }}{% endif %}{% endblock %}

{% block head_css %}
<link rel='stylesheet' type='text/css' href="{{ url_for('static', filename='css/list.css') }}">
<link rel='stylesheet' type='text/css' href="{{ url_for('static', filename='css/profile.css') }}">
{% endblock %}

{% block content %}
<div class="half-grid">
    <div class="column">
        {% if eventMeetingData['meeting'] %}
        <h1>Meeting: {{ eventMeeting.start.strftime('%B %-d, %Y') }}</h1>
        {% else %}
        <h1>{{ eventMeeting.name }}: {{ eventMeeting.start.strftime('%B %-d, %Y') }}</h1>
        {% endif %}
        <h4>Description: {{ desc }}</h4>
        <h4>Location: {{ eventMeeting.location }}</h4>
        {% if eventMeetingData['future'] %}
        {% if eventMeetingData['meeting'] %}
        {% if eventMeeting['usergoing'] %}
        <a href="{{ url_for('meetingNotGoing', idOfMeeting=eventMeeting.id) }}">I'm not going</a>
        {% else %}
        <a href="{{ url_for('meetingGoing', idOfMeeting=eventMeeting.id) }}">I'm going</a>
        {% endif %}
        {% else %}
        {% if eventMeeting['usergoing'] %}
        <a href="{{ url_for('eventNotGoing', idOfEvent=eventMeeting.id) }}">I'm not going</a>
        {% else %}
        <a href="{{ url_for('eventGoing', idOfEvent=eventMeeting.id) }}">I'm going</a>
        {% endif %}
        {% endif %}
        {% endif %}
    </div>
    <div class="column">
        <div class="lrg green"><h4>{{ hourcount }}</h4></div>
        {% if eventMeetingData['meeting'] %}
        <h4 class="desc">Meeting Length</h4>
        {% else %}
        <h4 class="desc">Event Length</h4>
        {% endif %}
    </div>
    <div class="column">
        <ul>
            {% if eventMeetingData['future'] %}
            <li><h2 class="profiletitle">Members Going</h2></li>
            {% else %}
            <li><h2 class="profiletitle">Members Attended</h2></li>
            {% endif %}
            {% if eventMeetingData['users'] %}
            {% for people in eventMeetingData['users'] %}
            <a href="{{ url_for('profile', num=people.namecount, first=people.firstname, last=people.lastname) }}">
                <li>
                    <p>{% if people.nicknameapprove %}{{ people.nickname}}{% else %}{{ people.firstname }} {{ people.lastname }}{% endif %}</p>
                </li>
            </a>
            {% endfor %}
            {% else %}
            <li><p>There are currently no members on this list</p></li>
            {% endif %}
        </ul>
    </div>
    <div class="column">
        <ul>
            {% if eventMeetingData['future'] %}
            <li><h2 class="profiletitle">JYL Resources</h2></li>
            <a href="#"><li><p>Help Request</p></li></a>
            <a href="{{ url_for('upcomingMeetings') }}"><li><p>Upcoming Meetings</p></li></a>
            <a href="{{ url_for('upcomingEvents') }}"><li><p>Upcoming Events</p></li></a>
            {% else %}
            <li><h2 class="profiletitle" id="reviews">Reviews</h2></li>
            <a href="#make-review">
                <li>
                    <span>{{ eventMeeting.upvote }} <i class="fas fa-smile-beam"></i></span>
                    <span>{{ eventMeeting.unsurevote }} <i class="fas fa-meh"></i></span>
                    <span>{{ eventMeeting.downvote }} <i class="fas fa-frown"></i></span>
                </li>
            </a>
            {% for i in range(reviewlen) %}
            <a href="#make-review">
                <li>
                    <h4>
                    {% if eventMeetingData['userreview'][i].upvote %}
                    <i class="fas fa-smile-beam"></i>
                    {% elif eventMeetingData['userreview'][i].downvote %}
                    <i class="fas fa-frown"></i>
                    {% else %}
                    <i class="fas fa-meh"></i>
                    {% endif %}
                    {% if eventMeetingData['userreviewwho'][i].nicknameapprove %}
                    {{ eventMeetingData['userreviewwho'][i].nickname}}: 
                    {% else %}
                    {{ eventMeetingData['userreviewwho'][i].firstname }} {{ eventMeetingData['userreviewwho'][i].lastname }}: 
                    {% endif %}
                    {{ eventMeetingData['userreview'][i].comment }}
                    </h4>
                </li>
            </a>
            {% endfor %}
            {% endif %}
        </ul>
    </div>
</div>
{% endblock %}