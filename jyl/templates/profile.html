{% extends 'base.html' %}

{% block title %}{% if user.nicknameapprove %}{{ user.nickname}}{% else %}{{ user.firstname }} {{ user.lastname }}{% endif %}{% endblock %}

{% block head_css %}
<link rel='stylesheet' type='text/css' href="{{ url_for('static', filename='css/profile.css') }}">
{% endblock %}

{% block content %}
<div class="half-grid">
    <div class="column">
        {% if user.nicknameapprove %}
        <h1 class="name">{% if current_user.id == user.id %}<a class="edit" href="#">{% endif %}<span class="underline">{{ user.nickname}}</span>{% if current_user.id == user.id %} <i class="fas fa-user-edit profile-edit"></i></a>{% endif %}</h1>
        <h3 class="subname">{{ user.firstname }} {{ user.lastname }}</h3>
        {% else %}
        <h1 class="name">{% if current_user.id == user.id %}<a class="edit" href="#">{% endif %}<span class="underline">{{ user.firstname }} {{ user.lastname }}</span>{% if current_user.id == user.id %} <i class="fas fa-user-edit profile-edit"></i></a>{% endif %}</h1>
        {% endif %}
        {% if user.admin %}
        <p class="tag admin">Admin</p>
        {% endif %}
        {% if user.leader %}
        <p class="tag leader">Leader</p>
        {% endif %}
    </div>
    <div class="column">
        <div class="hours lrg"><h4>{{ user.hours }}</h4></div>
    </div>
    <div class="column">
        <h2 class="profiletitle">Meetings</h2>
        <div class="hours sml"><h4>{{ profileData['meetingHours'] }}</h4></div>
        {% if profileData['meetingsPresent'] %}
        {% for recentMeetings in profileData['recentMeetingsAttended'] %}
            <div class="profile-item meeting">
                <a href="{{ url_for('meetingInfo', idOfMeeting=recentMeetings.id) }}">
                    <h4>{{ recentMeetings.start.strftime('%B %-d, %Y') }}</h4>
                    <p>{{ recentMeetings.description }}</p>
                </a>
            </div>
        {% endfor %}
        {% else %}
            <div class="profile-item meeting">
                <a href="#">
                    <h4>{% if user.nicknameapprove %}{{ user.nickname}}{% else %}{{ user.firstname }} {{ user.lastname }}{% endif %} hasn't attended any meetings yet</h4>
                </a>
            </div>
        {% endif %}
    </div>
    <div class="column">
        <h2 class="profiletitle">Events</h2>
        <div class="hours sml"><h4>{{ profileData['eventHours'] }}</h4></div>
        {% if profileData['eventsPresent'] %}
        {% for recentEvents in profileData['recentEventsAttended'] %}
            <div class="profile-item event">
                <a href="#">
                    <h4>{{ recentEvents.name }}</h4>
                    <h5>{{ recentEvents.start.strftime('%B %-d, %Y') }}</h5>
                    <p>{{ recentEvents.description }}</p>
                </a>
            </div>
        {% endfor %}
        {% else %}
            <div class="profile-item event">
                <a href="#">
                    <h4>{% if user.nicknameapprove %}{{ user.nickname}}{% else %}{{ user.firstname }} {{ user.lastname }}{% endif %} hasn't attended any events yet</h4>
                </a>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block trailing_js %}
<script type="text/javascript" src="{{ url_for('static', filename='js/profile.js') }}"></script>
{% endblock %}