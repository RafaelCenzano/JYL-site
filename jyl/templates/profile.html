{% extends 'base.html' %}

{% block title %}{% if user.nicknameapprove %}{{ user.nickname}}{% else %}{{ user.firstname }} {{ user.lastname }}{% endif %}{% endblock %}

{% block head_css %}
<link rel='stylesheet' type='text/css' href="{{ url_for('static', filename='css/profile.css') }}">
{% endblock %}

{% block content %}
<div class="half-grid">
    <div class="column">
        {% if user.nicknameapprove %}
        <h1 class="name">{{ user.nickname}}</h1>
        <h3 class="subname">{{ user.firstname }} {{ user.lastname }}</h3>
        {% else %}
        <h1 class="name">{{ user.firstname }} {{ user.lastname }}</h1>
        {% endif %}
        {% if user.admin %}
        <p class="tag admin">Admin</p>
        {% endif %}
        {% if user.leader %}
        <p class="tag leader">Leader</p>
        {% endif %}
    </div>
    <div class="column">
        <div class="hours">{% if user.hours > 85.0 %}<h4 class="succeed">{% elif user.hours > 85.0/2.0 %}<h4 class="closing">{% else %}<h4 class="starting">{% endif %}{{ user.hours }}</h4></div>
    </div>
    <div class="column">
        <h2 class="profiletitle">Meetings</h2>
        <div class="hours"><h4>{{ meetingHours }}</h4></div>
        {% if meetingsPresent %}
        {% for recentMeetings in recentMeetingsAttended %}
            <div class="profile-item meeting">
                <a href="#">
                    <h4>{{ recentMeetings.start.strftime('%B %-d, %Y') }}</h4>
                    <p>{{ recentMeetings.description }}</p>
                </a>
            </div>
        {% endfor %}
        {% else %}
            <div class="profile-item meeting">
                <a href="#">
                    <h4>{% if user.nicknameapprove %}{{ user.nickname}}{% else %}{{ user.firstname }} {{ user.lastname }}{% endif %} hasn't attended any meetings yet</h4>
                </a>
            </div>
        {% endif %}
    </div>
    <div class="column">
        <h2 class="profiletitle">Events</h2>
        <div class="hours"><h4>{{ eventHours }}</h4></div>
        {% if eventsPresent %}
        {% for recentEvents in recentEventsAttended %}
            <div class="profile-item event">
                <a href="#">
                    <h4>{{ recentEvents.name }}</h4>
                    <h5>{{ recentEvents.start.strftime('%B %-d, %Y') }}</h5>
                    <p>{{ recentEvents.description }}</p>
                </a>
            </div>
        {% endfor %}
        {% else %}
            <div class="profile-item event">
                <a href="#">
                    <h4>{% if user.nicknameapprove %}{{ user.nickname}}{% else %}{{ user.firstname }} {{ user.lastname }}{% endif %} hasn't attended any events yet</h4>
                </a>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}